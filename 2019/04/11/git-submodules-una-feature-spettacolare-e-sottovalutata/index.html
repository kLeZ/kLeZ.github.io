<!doctype html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <!-- Begin Jekyll SEO tag v2.8.0 -->
    <title>Git submodules: una feature spettacolare e sottovalutata | Alessandro ‘kLeZ’ Accardo personal website</title>
    <meta name="generator" content="Jekyll v3.9.3" />
    <meta property="og:title" content="Git submodules: una feature spettacolare e sottovalutata" />
    <meta name="author" content="kLeZ" />
    <meta property="og:locale" content="en_US" />
    <meta name="description" content="Oggi parlo di Git, e in particolare di una feature di questo indispensabile strumento che spesso viene sottovalutata o non considerata a dovere nell’organizzazione del codice." />
    <meta property="og:description" content="Oggi parlo di Git, e in particolare di una feature di questo indispensabile strumento che spesso viene sottovalutata o non considerata a dovere nell’organizzazione del codice." />
    <link rel="canonical" href="https://klez.me/2019/04/11/git-submodules-una-feature-spettacolare-e-sottovalutata/" />
    <meta property="og:url" content="https://klez.me/2019/04/11/git-submodules-una-feature-spettacolare-e-sottovalutata/" />
    <meta property="og:site_name" content="Alessandro ‘kLeZ’ Accardo personal website" />
    <meta property="og:type" content="article" />
    <meta property="article:published_time" content="2019-04-11T08:07:47+02:00" />
    <meta name="twitter:card" content="summary" />
    <meta property="twitter:title" content="Git submodules: una feature spettacolare e sottovalutata" />
    <meta name="twitter:site" content="@kLeZhAcK" />
    <meta name="twitter:creator" content="@kLeZhAcK" />
    <script type="application/ld+json">
      {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"kLeZ"},"dateModified":"2019-04-11T08:07:47+02:00","datePublished":"2019-04-11T08:07:47+02:00","description":"Oggi parlo di Git, e in particolare di una feature di questo indispensabile strumento che spesso viene sottovalutata o non considerata a dovere nell’organizzazione del codice.","headline":"Git submodules: una feature spettacolare e sottovalutata","mainEntityOfPage":{"@type":"WebPage","@id":"https://klez.me/2019/04/11/git-submodules-una-feature-spettacolare-e-sottovalutata/"},"url":"https://klez.me/2019/04/11/git-submodules-una-feature-spettacolare-e-sottovalutata/"}
    </script>
    <!-- End Jekyll SEO tag -->
    <link rel="stylesheet" href="/assets/bootstrap/bootstrap-reboot.min.css" />
    <link rel="stylesheet" href="/assets/bootstrap/bootstrap-grid.min.css" />
    <link rel="stylesheet" href="/assets/bootstrap/bootstrap.min.css" />
    <link rel="stylesheet" href="/assets/fontawesome-free/css/all.min.css" />
    <link rel="stylesheet" href="/assets/katex/katex.min.css" />
    <link rel="stylesheet" href="/assets/main.css" />
    <link type="application/atom+xml" rel="alternate" href="https://klez.me/feed.xml" title="Alessandro &apos;kLeZ&apos; Accardo personal website" />
  </head>
  <body class="post-page">
    <header class="masthead" style="background-image: url(/assets/img/home-bg.jpg)">
      <div class="overlay"></div>
      <div class="container-fluid">
        <div class="row">
          <div class="col-lg-8 col-md-10 mx-auto">
            <div class="site-heading">
              <h1>Alessandro 'kLeZ' Accardo personal website</h1>
              <span class="subheading">This is the personal website of an Italian developer once called 'kLeZ'.</span>
            </div>
          </div>
        </div>
      </div>
    </header>
    <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
      <div class="container">
        <a class="navbar-brand" href="/">kLeZ</a>
        <a class="navbar-brand" href="https://github.com/kLeZ/kLeZ.github.io/actions/workflows/main.yaml" target="_blank">
          <img src="https://github.com/kLeZ/kLeZ.github.io/actions/workflows/main.yaml/badge.svg?branch=dev" alt="build status badge" />
        </a>
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navigation" aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
          Menu
          <i class="fa fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navigation">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item ">
              <a class="nav-link" href="/build.html">Build</a>
            </li>
            <li class="nav-item ">
              <a class="nav-link" href="/blog">Posts</a>
            </li>
            <li class="nav-item dropdown ">
              <a class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" href="#">About me <span class="caret"></span></a>
              <div class="dropdown-menu">
                <a class="dropdown-item " href="/about">About</a>
                <a class="dropdown-item " href="/contatti">Contatti</a>
                <a class="dropdown-item " href="/cv">Curriculum Vitae</a>
              </div>
            </li>
            <li class="nav-item ">
              <a class="nav-link" href="https://github.com/kLeZ/kLeZ.github.io">Repository</a>
            </li>
            <li class="nav-item dropdown ">
              <a class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" href="#">Progetti <span class="caret"></span></a>
              <div class="dropdown-menu">
                <a class="dropdown-item " href="https://klez.me/wash-ideas">Wash Ideas (Alpha)</a>
                <a class="dropdown-item " href="https://klez.me/PassMan">PassMan</a>
              </div>
            </li>
            <li class="nav-item ">
              <a class="nav-link" href="/eventi">Eventi</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <main class="container-fluid" aria-label="Content">
      <div class="row">
        <div class="col-lg-2 col-md-12">
          <aside class="sticky-top mb-3 mb-lg-0 bg-light px-3 border rounded-lg border-dark shadow">
            <p class="text-muted">
              This article will take 4 minutes to read.
            </p>
          </aside>
        </div>
        <div class="col-lg-8 col-md-12">
          <article itemscope itemtype="http://schema.org/BlogPosting">
            <header>
              <h2>Git submodules: una feature spettacolare e sottovalutata</h2>
              <small class="text-muted">Posted on
                <time datetime="2019-04-11T08:07:47+02:00" itemprop="datePublished">11 Apr 2019</time><span> • by <span class="font-italic" itemprop="author" itemscope itemtype="http://schema.org/Person">kLeZ</span></span></small>
            </header>
            <section itemprop="articleBody">
              <p>Oggi parlo di Git, e in particolare di una feature di questo indispensabile strumento che spesso viene sottovalutata o non considerata a dovere nell’organizzazione del codice.</p>
              <!--more-->
              <p class="m-0 invisible zero-size">
                <a class="invisible" id="read-more" href="#">read more</a>
              </p>
              <h2 id="cosa-è">Cosa è</h2>
              <p>Un <em>submodule</em>, come dice la <a href="https://git-scm.com/book/en/v2/Git-Tools-Submodules">documentazione ufficiale</a> è un <em>repository</em> git inserito nel <em>working tree</em> di un altro <em>repository</em> git, come dipendenza.</p>
              <p>A tutti sarà capitato di avere una libreria usata in più progetti, o addirittura comune all’organizzazione. Ecco, i <em>submodule</em> servono proprio a questo. Permettono di specificare che un determinato percorso è in realtà un <em>repository</em> separato, che deve essere scaricato e mantenuto aggiornato di volta in volta.</p>
              <p>Chiaramente esistono ottimi sistemi che evitano l’esigenza di questa funzione, ma non è sempre così.</p>
              <p>Nel caso in cui io stia sviluppando in <strong>Java</strong> avrei <strong>Maven</strong> o <strong>Gradle</strong>, ottimi tool di gestione delle dipendenze.<br />
                Nel caso in cui io stia sviluppando in <strong>C#</strong> avrei <strong>NuGet</strong>, anch’esso ottimo.<br />
                Così via anche con <strong>Python</strong>, <strong>Ruby</strong>, <strong>Perl</strong>.</p>
              <p>Ma non sempre ho a disposizione questi strumenti, oppure non posso o non voglio pubblicare.</p>
              <div class="premonition info">
                <div class="fa fa-info-circle"></div>
                <div class="content">
                  <p>Esempio pratico: questo blog.<br />
                    In questo blog utilizzo molti <em>plugin</em>, potrai vederli nel <em>[Gemfile]</em> o nel [file di configurazione].</p>
                </div>
              </div>
              <p>Per due di questi però (uno effettivamente non è un <em>plugin</em> ma sorvoliamo), ho dovuto usare dei <em>submodule</em>. Andiamo con ordine.</p>
              <h3 id="premonition">Premonition</h3>
              <p>Premonition è un ottimo <em>plugin</em> per Jekyll che mi aiuta a scrivere meno codice quando sto scrivendo un articolo, momento in cui di fatto io voglio scrivere il minor quantitativo di parole strettamente formali e conformi possibile (soprattutto perché la sintassi formale ha bisogno di delimitatori per aiutare il <em>parser</em>, e i caratteri speciali usati di solito non sono così semplici da scrivere su uno smartphone).</p>
              <div class="premonition citation">
                <div class="fas fa-quote-left"></div>
                <blockquote class="content blockquote">
                  <p>I caratteri speciali usati di solito non sono così semplici da scrivere su uno smartphone</p>
                </blockquote>
              </div>
              <p>Proprio il blocco di citazione che vedi qua sopra è opera di <em>premonition</em>, o quantomeno della mia variante, ma ci arrivo.<br />
                <em>Premonition</em> mi aiuta a usare blocchi di citazione (<em>blockquote</em>, in HTML) e a dargli uno stile grafico che sia semantico rispetto al contenuto. Di base offre quattro tipi di citazioni:</p>
              <div class="premonition note">
                <div class="fa fa-check-square"></div>
                <div class="content">
                  <p>Questo è un blocco di citazione con stile “<em>note</em>”</p>
                </div>
              </div>
              <hr />
              <div class="premonition info">
                <div class="fa fa-info-circle"></div>
                <div class="content">
                  <p>Questo è un blocco di citazione con stile “<em>info</em>”</p>
                </div>
              </div>
              <hr />
              <div class="premonition warning">
                <div class="fa fa-exclamation-circle"></div>
                <div class="content">
                  <p>Questo è un blocco di citazione con stile “<em>warning</em>”</p>
                </div>
              </div>
              <hr />
              <div class="premonition error">
                <div class="fa fa-exclamation-triangle"></div>
                <div class="content">
                  <p>Questo è un blocco di citazione con stile “<em>error</em>”</p>
                </div>
              </div>
              <p>E il blocco sopra? Quello con le “virgolette”? Ecco, quello e un’altra piccolezza sono la mia modifica.</p>
              <p>Per contribuire all’<em>open source</em> come di solito mi preme fare, ho deciso di <em>forkare</em> il progetto e fare le mie modifiche, mandando poi una <em>Pull request</em> all’owner del progetto (che onestamente sembra non lo stia più sviluppando). Quindi, se prima potevo scaricare la gemma con l’ottimo sistema integrato in <em>Ruby</em>, adesso non posso più farlo, perché devo usare la mia versione “di sviluppo”, fino a che la mia modifica non verrà pubblicata.</p>
              <p>Visto che Jekyll è in grado di accettare <em>plugin</em> nell’apposita cartella decido di ficcare il sorgente di premonition li dentro, un paio di test in locale e funziona tutto.</p>
              <h3 id="sgeext">SgEExt</h3>
              <p>Integrando un altro plugin, JEmoji, mi imbatto in un qualcosa che non mi piace, JEmoji pesca le <em>png</em> delle emoji da githubassets.com, e io non voglio che lo faccia perché non voglio connessioni esterne al mio dominio (fatta eccezione per il badge “live” di TravisCI).</p>
              <p>Cercando in rete una soluzione trovo uno script <em>python</em> che fa al caso mio: scarica le emoji da githubassets.com e le riversa nella mia cartella di asset.</p>
              <p>Ma io non voglio che un domani questo script, presente su github, venga aggiornato senza la possibilità di accedere facilmente agli aggiornamenti. Quindi anche per questo script, che di fatto non ho modificato, clono il <em>repository</em>, faccio due test in locale e tutto funziona.</p>
              <h3 id="la-questione">La questione</h3>
              <p>Soddisfatto, anche dell’<a href="/2019/04/09/aggiornamenti-sulla-direttiva-per-il-copyright/">articolo precedente a questo</a>, decido che è il caso di pubblicare tutto in “produzione”. Git <strong>add</strong>, <strong>commit</strong> e <strong>push</strong> e sono “live” (sempre live).</p>
              <p>Arriva una mail però in cui Travis mi avvisa che la <em>build</em> è fallita, i log affermano che c’è un problema nel trovare un file <strong>SASS</strong>, “{…}/premonition.scss”.</p>
              <p>Non intuendo quello che succede controllo e capisco che Git (giustamente) non pubblica i <em>repository</em> che si trovano all’interno di altri <em>repository</em>. Quindi penso a una soluzione e subito mi viene in mente la parola “<em>submodule</em>”.</p>
              <p>Raccolgo informazioni dallo smartphone (l’unico strumento a mia disposizione in quel momento) e decido di provare quello che la documentazione mi racconta, molto alla cieca.</p>
              <p>Creo il file <em>.gitmodules</em>, ci metto dentro le due sezioni relative ai due <em>repository</em> da includere stando attento alla posizione nel <em>working tree</em> e alla <em>url</em> inserita e provo un <em>commit</em> correttivo.</p>
              <p>Potete verificare voi stessi quale unica modifica ho fatto tramite il comando <code class="language-plaintext highlighter-rouge">git diff 958006..bae173</code>: risulterà che ho aggiunto il file <em>.gitmodules</em> e ho inserito il supporto ai <em>submodule</em> in Travis (dovrebbe essere già attivo di default, ma non volevo eccedere di sicurezza).</p>
              <p>Va tutto molto bene per fortuna e ho il mio post online (cruciale la data, visto che il 15 di questo mese si voterà definitivamente la direttiva).</p>
              <p>Totale della correzione: circa 15 minuti (operativi) dalla notifica del fallimento della <em>build</em> all’implementazione della soluzione. In realtà il tempo reale è stato molto di più, ho pubblicato e sono stato notificato del fallimento sul treno, e ho potuto risolvere solo in pausa pranzo.</p>
              <h3 id="conclusione">Conclusione</h3>
              <p>Questo vi racconta quanto questa funzione di Git sia semplice da usare e da capire, e vi dà un’idea di quanto possa essere utile e potente come strumento quando la struttura del progetto sia particolare (e neanche tanto poi).</p>
              <div class="premonition citation">
                <div class="fas fa-quote-left"></div>
                <blockquote class="content blockquote">
                  <p>Usate quanto più possibile le funzioni dei vostri strumenti senza avere paura, a qualsiasi livello, è importante non tralasciare mai questo aspetto vitale che ci evita tante complicazioni inutili (come avere un progetto comune che viene copia-incollato ovunque e si disallinea a T con 0).</p>
                  <footer class="blockquote-footer"><cite title="kLeZ">kLeZ</cite></footer>
                </blockquote>
              </div>
            </section>
            <a href="/2019/04/11/git-submodules-una-feature-spettacolare-e-sottovalutata/" hidden></a>
          </article>
        </div>
        <div class="col-lg-2 col-md-12">
        </div>
      </div>
      <div class="row justify-content-end text-right">
        <div class="col-6">
          <a id="scroller" class="btn m-3 p-2 text-light bg-dark rounded" title="Scroll to the top of the page" href="#">
            <i class="fa fa-5x fa-chevron-up"></i>
          </a>
        </div>
      </div>
    </main>
    <footer class="site-footer bg-light w-100 py-3">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-md-10 mx-auto">
            <ul class="list-inline text-center">
              <li class="list-inline-item">
                <a rel="me" href="https://github.com/kLeZ">
                  <i class="svg-icon fab fa-github"></i>
                </a>
              </li>
              <li class="list-inline-item">
                <a rel="me" href="https://twitter.com/kLeZhAcK">
                  <i class="svg-icon fab fa-twitter"></i>
                </a>
              </li>
              <li class="list-inline-item">
                <a rel="me" href="https://mastodon.uno/web/@klez">
                  <i class="svg-icon fab fa-mastodon"></i>
                </a>
              </li>
              <li class="list-inline-item">
                <a rel="me" href="https://www.linkedin.com/in/alessandroaccardo">
                  <i class="svg-icon fab fa-linkedin"></i>
                </a>
              </li>
              <li class="list-inline-item">
                <a rel="me" href="https://telegram.me/julius8774">
                  <i class="svg-icon fab fa-telegram"></i>
                </a>
              </li>
              <li class="list-inline-item">
                <a rel="me" href="/feed.xml">
                  <i class="svg-icon fa fa-rss"></i>
                </a>
              </li>
              <li class="list-inline-item">
                <a rel="me" href="mailto:klez@pm.me">
                  <i class="svg-icon fa fa-envelope"></i>
                </a>
              </li>
            </ul>
          </div>
        </div>
        <div class="row">
          <div class="col text-left">
            <small class="text-muted">Last build on <time datetime="2025-05-26T15:51:55+02:00">Mon, 26 May 2025 15:51:55 +0200</time></small>
          </div>
          <div class="col text-right">
            <small class="text-muted">Copyright © Alessandro 'kLeZ' Accardo 2019</small>
          </div>
        </div>
        <div class="row">
          <div class="col text-center">
            <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png" /></a><br />
            <small class="text-muted">
              This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" class="text-secondary">Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License</a>.
            </small>
          </div>
        </div>
      </div>
    </footer>
    <script src="/assets/jquery/jquery-3.3.1.min.js"></script>
    <script src="/assets/popper/popper.min.js"></script>
    <script src="/assets/popper/tooltip.min.js"></script>
    <script src="/assets/bootstrap/bootstrap.bundle.min.js"></script>
    <script src="/assets/fontawesome-free/js/all.min.js"></script>
    <script src="/assets/main.js"></script><script data-goatcounter="https://klez.goatcounter.com/count" async src="https://gc.zgo.at/count.js"></script>
    <noscript>
      <img src="https://klez.goatcounter.com/count?rnd&p=https://klez.me/2019/04/11/git-submodules-una-feature-spettacolare-e-sottovalutata/&t=Git%20submodules:%20una%20feature%20spettacolare%20e%20sottovalutata" alt="goat-counter" />
    </noscript>
  </body>
</html>